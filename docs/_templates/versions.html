{%- if doc_versions and doc_versions|length > 1 and doc_base is defined -%}
<div class="version-switcher" data-doc-base="{{ doc_base }}" data-pagename="{{ pagename }}">
  Version
  <select id="version-select">
    {%- for v in doc_versions -%}
    <option value="{{ v }}"{% if v == current_version %} selected{% endif %}>{{ v }}</option>
    {%- endfor -%}
  </select>
</div>
<script>
(function() {
  var el = document.querySelector('.version-switcher');
  if (!el) return;
  var base = el.getAttribute('data-doc-base') || '';
  var pagename = el.getAttribute('data-pagename') || 'index';
  var sel = document.getElementById('version-select');
  if (sel) sel.onchange = function() {
    var ver = this.value;
    var path = pagename + '.html';
    var url = (base ? base + '/' : '/') + ver + '/' + path;
    window.location.href = url;
  };
})();
</script>
{%- endif -%}
